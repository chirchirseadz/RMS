{% extends 'partials/base.html' %}
{% load static %}
{% load crispy_forms_tags %}
{% block title %} RMS | Mpesa | Online {% endblock %}
{% block content %}

{% include 'partials/navbar.html' %}



<div class="container  p-lg-5 mt-lg-5">
    {% include 'partials/messages.html' %}
      <div style="margin-top: 30%;" class="card mt-lg-5 btn-danger shadow m-lg-3 p-lg-3">
          <div class="card-body ">
             
                <hr>
                <h4 style="text-align: center;"  class=" mt-lg-3 p-lg-2 text-success">TENANTS ONLINE RENT PAYMENTS<span class="m-3 ">
                  <hr>
          </div>
          <div class="row">
            <div class="" >
              <div class="card recent-sales overflow-auto shadow">
        
                <div class="card-body">
                  
                  <table class="table table-borderless datatable m-3">
                    <thead>
                      <tr>
                        <th scope="col">Tenant</th>
                        <th scope="col">Rent Details</th>
                        <th scope="col">Merchant Request ID</th>
                        <th scope="col">Checkout Request ID</th>
                        <th scope="col">Mpesa Receipt Number</th>
                        <th scope="col">Transaction Date</th>
                        <th scope="col">Mpesa Receipt Number</th>
                        <th scope="col">Amount</th>
                        <th scope="col">Approved</th>
 
                      </tr>
                    </thead>
                    <tbody>
                      {% for info in payments  %}
                      <tr>
                        <td>{{info.tenant}}</td>
                        <td>{{info.RentDetails}}</td>
                        <td>{{info.MerchantRequestID}}</td>
                        <td>{{info.CheckoutRequestID}}</td>
                        <td>{{info.MpesaReceiptNumber}}</td>
                        <td>{{info.TransactionDate}}</td>
                        <td>{{info.MpesaReceiptNumber}}</td>
                        <td>{{info.Amount}} /=</td>
                        {% if info.Approved %}
                        <td><span class="badge bg-success">Approved</span></td>
                        {% else %}
                        <td><span class="badge bg-warning"> Pending...</span></td>
                        {% endif %}
                        <td><a class="btn btn-primary btn-sm" href="{% url 'confirm_online_rent' info.id %}"> Confirm</a></td>
                        
                      </tr>
        
                      {% endfor  %}
              
                      </tr>
                    </tbody>
                  </table>
        
                </div>
        
              </div>
              
            </div>
          </div>
        </div> 

        
  </div>

    
  
  
</div>





{% endblock %}

<th scope="col">Rent Details</th>
<th scope="col">Merchant Request ID</th>
<th scope="col">Checkout Request ID</th>
<th scope="col">Mpesa Receipt Number</th>
<th scope="col">Transaction Date</th>
<th scope="col">Mpesa Receipt Number</th>
<th scope="col">Amount</th>
<th scope="col">Approved</th>



<br><br><br><br><br><br><br><br><br><br><br>
<h1> My These are online payments </h1><br>
{% for rents in lipa_na_mpesa_rents %}
{{rents}}
{% endfor %}

<br>
<h1> My These are Handset payments </h1>
{% for rents in handset_payments_rents %}
{{rents}}
{% endfor %}


